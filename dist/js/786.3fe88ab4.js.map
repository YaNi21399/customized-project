{"version":3,"file":"js/786.3fe88ab4.js","mappings":"iNAEOA,MAAM,a,GACTC,EAAAA,EAAAA,GAAa,UAAT,QAAI,G,GACHD,MAAM,O,GAEFA,MAAM,Q,GACJA,MAAM,gC,iBAQLA,MAAM,yB,GACPA,MAAM,a,yFAfnBE,EAAAA,EAAAA,IAAUC,IACVF,EAAAA,EAAAA,GAmBM,MAnBNG,EAmBM,CAlBJC,GACAJ,EAAAA,EAAAA,GAgBM,MAhBNK,EAgBM,gBAfJC,EAAAA,EAAAA,IAcMC,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAdqBC,EAAAA,SAAO,CAArBC,EAAMC,M,WAAnBJ,EAAAA,EAAAA,IAcM,OAd+BI,IAAKD,EAAKE,MAAOZ,MAAM,S,EAC1DC,EAAAA,EAAAA,GAYM,MAZNY,EAYM,EAXJZ,EAAAA,EAAAA,GAUM,MAVNa,EAUM,EATJb,EAAAA,EAAAA,GAMS,UALNc,QAAK,GAAEN,EAAAA,UAAUE,GAClBK,KAAK,SACLhB,MAAM,kCACP,QAED,MACAC,EAAAA,EAAAA,GAAuD,KAAvDgB,GAAuD,QAAlBP,EAAKE,OAAK,IAC/CX,EAAAA,EAAAA,GAA+C,IAA/CiB,GAA+C,QAAvBR,EAAKS,aAAW,Y,6EAcpD,GACEC,WAAY,CAAEC,OAAMA,EAAAA,GACpBC,QACE,MAAMC,GAAUC,EAAAA,EAAAA,IAAI,KAEd,GAAEC,IAAOC,EAAAA,EAAAA,KACTC,GAAOC,EAAAA,EAAAA,MACPC,GAAML,EAAAA,EAAAA,IAAI,IAEVM,EAAU,KACU,MAApBH,EAAKI,cACPF,EAAIG,MAAQL,EAAKI,YAAYF,IAC/B,EAGII,EAAUC,UACd,MAAMC,GAAUC,EAAAA,EAAAA,IAAIX,EAAI,QAASY,SAC3BC,EAAAA,EAAAA,IAAOH,GAASI,MAAMH,IAC1Bb,EAAQS,MAAMQ,KAAK,IAAKJ,EAAIK,QAAS,GACrC,EAGJ,IAAIC,EAAS,GACb,MAAMC,EAAST,UACb,MAAMU,GAASR,EAAAA,EAAAA,IAAIX,EAAI,UAAWI,EAAIG,aAChCM,EAAAA,EAAAA,IAAOM,GAAQL,MAAMH,IAC1BM,EAASG,OAAOC,OAAOV,EAAIK,QAC1B,IAAK,IAAIM,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IACjCd,EAAQS,EAAOK,GACjB,GACA,EAGEE,EAAYf,UAChBX,EAAQS,MAAMkB,OAAOC,EAAO,GAC5BT,EAAOQ,OAAOC,EAAO,GACrB,MAAMC,EAAYP,OAAOQ,OAAO,CAAC,EAAGX,SAC9BY,EAAAA,EAAAA,KAAOlB,EAAAA,EAAAA,IAAIX,EAAI,UAAWI,EAAIG,OAAQoB,EAAU,EAOxD,OAJAG,EAAAA,EAAAA,KAAU,KACRzB,IACAa,GAAQ,IAEH,CAAEpB,UAAS0B,YACpB,G,QCtEF,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://customized-project/./src/views/MyFav.vue","webpack://customized-project/./src/views/MyFav.vue?1231"],"sourcesContent":["<template>\r\n  <Navbar />\r\n  <div class=\"container\">\r\n    <h1>收藏列表</h1>\r\n    <div class=\"row\">\r\n      <div v-for=\"(item, key) in favList\" :key=\"item.title\" class=\"col-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body d-flex flex-column\">\r\n            <button\r\n              @click=\"deleteFav(key)\"\r\n              type=\"button\"\r\n              class=\"btn btn-primary align-self-end\"\r\n            >\r\n              已收藏\r\n            </button>\r\n            <h5 class=\"h4 fw-bold card-title\">{{ item.title }}</h5>\r\n            <p class=\"card-text\">{{ item.description }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebaseProject from \"@/firebase/config\";\r\nimport { getDoc, doc, setDoc } from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport Navbar from \"../components/Navbar.vue\";\r\nexport default {\r\n  components: { Navbar },\r\n  setup() {\r\n    const favList = ref([]);\r\n\r\n    const { db } = firebaseProject();\r\n    const auth = getAuth();\r\n    const uid = ref(\"\");\r\n\r\n    const getUser = () => {\r\n      if (auth.currentUser != null) {\r\n        uid.value = auth.currentUser.uid;\r\n      }\r\n    };\r\n\r\n    const getSpot = async (id) => {\r\n      const spotRef = doc(db, \"spots\", id);\r\n      await getDoc(spotRef).then((doc) => {\r\n        favList.value.push({ ...doc.data() });\r\n      });\r\n    };\r\n\r\n    let favArr = [];\r\n    const getFav = async () => {\r\n      const docRef = doc(db, \"favList\", uid.value);\r\n      await getDoc(docRef).then((doc) => {\r\n       favArr = Object.values(doc.data());\r\n        for (let i = 0; i < favArr.length; i++) {\r\n          getSpot(favArr[i]);\r\n        }\r\n      });\r\n    };\r\n\r\n    const deleteFav = async (index) => {\r\n      favList.value.splice(index, 1)\r\n      favArr.splice(index, 1);\r\n      const favObject = Object.assign({}, favArr);\r\n      await setDoc(doc(db, \"favList\", uid.value), favObject)\r\n    }\r\n\r\n    onMounted(() => {\r\n      getUser();\r\n      getFav();\r\n    });\r\n    return { favList, deleteFav };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import { render } from \"./MyFav.vue?vue&type=template&id=d41cbe5a\"\nimport script from \"./MyFav.vue?vue&type=script&lang=js\"\nexport * from \"./MyFav.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vue練習\\\\customized-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_Navbar","_hoisted_1","_hoisted_2","_hoisted_3","_createElementBlock","_Fragment","$setup","item","key","title","_hoisted_4","_hoisted_5","onClick","type","_hoisted_7","_hoisted_8","description","components","Navbar","setup","favList","ref","db","firebaseProject","auth","getAuth","uid","getUser","currentUser","value","getSpot","async","spotRef","doc","id","getDoc","then","push","data","favArr","getFav","docRef","Object","values","i","length","deleteFav","splice","index","favObject","assign","setDoc","onMounted","__exports__","render"],"sourceRoot":""}