"use strict";(self["webpackChunkcustomized_project"]=self["webpackChunkcustomized_project"]||[]).push([[161],{9919:function(t,e,n){var a=n(6035),s=n(7732),i=n(4870);const c=t=>{const{db:e}=(0,s.Z)(),n=(0,a.JU)(e,"spots",`${t}`),c=(0,i.iH)({}),u=()=>{(0,a.QT)(n).then((t=>{c.value=t.data()}))};return{data:c,load:u}};e["Z"]=c},3161:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var a=n(3396),s=n(9242),i=n(7139);const c={class:"single container"},u=(0,a._)("h1",null,"單筆資料",-1),l={key:0};function o(t,e,n,o,r,v){const d=(0,a.up)("Navbar");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d),(0,a._)("div",c,[u,o.uid?((0,a.wg)(),(0,a.iD)("div",l,[!1===o.isFav?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e[0]||(e[0]=(0,s.iM)((t=>o.toggleFav()),["prevent"])),type:"button",class:"btn btn-primary"}," 加入收藏 ")):!0===o.isFav?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:e[1]||(e[1]=(0,s.iM)((t=>o.toggleFav()),["prevent"])),type:"button",class:"btn btn-danger"}," 取消收藏 ")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("div",null,(0,i.zw)(o.data),1)])],64)}n(7658);var r=n(6035),v=n(7732),d=n(7493),p=n(9919),b=n(2483),g=n(4870),f=n(6563),k={name:"singleView",components:{Navbar:f.Z},setup(){const t=(0,b.yj)(),e=t.params.id,{data:n,load:s}=(0,p.Z)(e),{db:i}=(0,v.Z)(),c=(0,d.v0)(),u=(0,g.iH)(""),l=()=>{null!=c.currentUser&&(u.value=c.currentUser.uid)},o=(0,g.iH)(!1);let f=[];const k=async()=>{const t=(0,r.JU)(i,"favList",u.value);await(0,r.QT)(t).then((t=>{const n=Object.values(t.data());f=n,f.includes(e)&&(o.value=!0)}))},w=async()=>{if(f.includes(e)){const t=f.indexOf(e);f.splice(t,1)}else f.push(e);const t=Object.assign({},f);await(0,r.pl)((0,r.JU)(i,"favList",u.value),t).then((()=>{o.value=!o.value})).catch((t=>console.log(t.message)))};return(0,a.bv)((()=>{s(),l(),k()})),{isFav:o,toggleFav:w,data:n,uid:u}}},w=n(89);const h=(0,w.Z)(k,[["render",o]]);var y=h}}]);
//# sourceMappingURL=161.a66daf7a.js.map