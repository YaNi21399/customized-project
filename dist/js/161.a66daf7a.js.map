{"version":3,"file":"js/161.a66daf7a.js","mappings":"qKAIA,MAAMA,EAAaC,IAEf,MAAM,GAAEC,IAAOC,EAAAA,EAAAA,KACTC,GAASC,EAAAA,EAAAA,IAAIH,EAAI,QAAU,GAAED,KAE7BK,GAAOC,EAAAA,EAAAA,IAAI,CAAC,GAEZC,EAAO,MACTC,EAAAA,EAAAA,IAAOL,GACFM,MAAKL,IACFC,EAAKK,MAAQN,EAAIC,MAAM,GACzB,EAGV,MAAO,CAAEA,OAAME,OAAM,EAGzB,Q,+GCnBOI,MAAM,oB,GACTC,EAAAA,EAAAA,GAAa,UAAT,QAAI,G,mGAFVC,EAAAA,EAAAA,IAAUC,IACVF,EAAAA,EAAAA,GAaM,MAbNG,EAaM,CAZJC,EACWC,EAAAA,MAAG,WAAdC,EAAAA,EAAAA,IAOI,UANiD,IAAVD,EAAAA,QAAK,WAAhDC,EAAAA,EAAAA,IAES,U,MAFAC,QAAK,yBAAUF,EAAAA,aAAS,cAA2BG,KAAK,SAAST,MAAM,mBAAkB,YAGxC,IAAVM,EAAAA,QAAK,WAArDC,EAAAA,EAAAA,IAES,U,MAFAC,QAAK,yBAAUF,EAAAA,aAAS,cAA+BG,KAAK,SAAST,MAAM,kBAAiB,YAErG,mCAEAC,EAAAA,EAAAA,GAEM,oBADDK,EAAAA,MAAI,S,mFAcb,GACEI,KAAM,aACNC,WAAY,CAAEC,OAAMA,EAAAA,GACpBC,QACE,MAAMC,GAAQC,EAAAA,EAAAA,MACR1B,EAAKyB,EAAME,OAAO3B,IAClB,KAAEK,EAAI,KAAEE,IAASR,EAAAA,EAAAA,GAAUC,IAE3B,GAAEC,IAAOC,EAAAA,EAAAA,KACT0B,GAAOC,EAAAA,EAAAA,MACPC,GAAMxB,EAAAA,EAAAA,IAAI,IAEVyB,EAAU,KACU,MAApBH,EAAKI,cACPF,EAAIpB,MAAQkB,EAAKI,YAAYF,IAC/B,EAGIG,GAAQ3B,EAAAA,EAAAA,KAAI,GAClB,IAAI4B,EAAU,GAEd,MAAMC,EAASC,UACb,MAAMjC,GAASC,EAAAA,EAAAA,IAAIH,EAAI,UAAW6B,EAAIpB,aAChCF,EAAAA,EAAAA,IAAOL,GAAQM,MAAML,IACzB,MAAMiC,EAAMC,OAAOC,OAAOnC,EAAIC,QAC9B6B,EAAUG,EACNH,EAAQM,SAASxC,KACnBiC,EAAMvB,OAAQ,EAChB,GACA,EAGE+B,EAAYL,UAChB,GAAIF,EAAQM,SAASxC,GAAK,CACxB,MAAM0C,EAAQR,EAAQS,QAAQ3C,GAC9BkC,EAAQU,OAAOF,EAAO,EACxB,MACER,EAAQW,KAAK7C,GAEf,MAAM8C,EAAYR,OAAOS,OAAO,CAAC,EAAGb,SAC9Bc,EAAAA,EAAAA,KAAO5C,EAAAA,EAAAA,IAAIH,EAAI,UAAW6B,EAAIpB,OAAQoC,GACzCrC,MAAK,KACJwB,EAAMvB,OAASuB,EAAMvB,KAAK,IAE3BuC,OAAOC,GAAQC,QAAQC,IAAIF,EAAIG,UAAS,EAS7C,OANAC,EAAAA,EAAAA,KAAU,KACR/C,IACAwB,IACAI,GAAQ,IAGH,CAAEF,QAAOQ,YAAWpC,OAAMyB,MACnC,G,QC5EF,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://customized-project/./src/composables/getSingle.js","webpack://customized-project/./src/views/SingleView.vue","webpack://customized-project/./src/views/SingleView.vue?7c63"],"sourcesContent":["import { getDoc, doc } from 'firebase/firestore'\r\nimport firebaseProject from '../firebase/config'\r\nimport { ref } from 'vue'\r\n\r\nconst getSingle = (id) => {\r\n\r\n    const { db } = firebaseProject()\r\n    const docRef = doc(db, 'spots', `${id}`)\r\n\r\n    const data = ref({})\r\n\r\n    const load = () => {\r\n        getDoc(docRef)\r\n            .then(doc => {\r\n                data.value = doc.data()\r\n            })\r\n    }\r\n\r\n    return { data, load }\r\n}\r\n\r\nexport default getSingle","<template>\r\n  <Navbar />\r\n  <div class=\"single container\">\r\n    <h1>單筆資料</h1>\r\n    <div v-if=\"uid\">\r\n    <button @click.prevent=\"toggleFav()\" v-if=\"isFav === false\" type=\"button\" class=\"btn btn-primary\">\r\n      加入收藏\r\n    </button>\r\n    <button @click.prevent=\"toggleFav()\" v-else-if=\"isFav === true\" type=\"button\" class=\"btn btn-danger\">\r\n      取消收藏\r\n    </button>\r\n  </div>\r\n    <div>\r\n      {{ data }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\r\nimport firebaseProject from \"@/firebase/config\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport getSingle from \"../composables/getSingle\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ref, onMounted } from \"vue\";\r\n\r\nimport Navbar from \"../components/Navbar.vue\";\r\nexport default {\r\n  name: \"singleView\",\r\n  components: { Navbar },\r\n  setup() {\r\n    const route = useRoute();\r\n    const id = route.params.id;\r\n    const { data, load } = getSingle(id);\r\n\r\n    const { db } = firebaseProject();\r\n    const auth = getAuth();\r\n    const uid = ref(\"\");\r\n\r\n    const getUser = () => {\r\n      if (auth.currentUser != null) {\r\n        uid.value = auth.currentUser.uid;\r\n      }\r\n    };\r\n\r\n    const isFav = ref(false);\r\n    let favList = [];\r\n\r\n    const getFav = async () => {\r\n      const docRef = doc(db, \"favList\", uid.value);\r\n      await getDoc(docRef).then((doc) => {\r\n        const arr = Object.values(doc.data());\r\n        favList = arr;\r\n        if (favList.includes(id)) {\r\n          isFav.value = true;\r\n        }\r\n      });\r\n    };\r\n\r\n    const toggleFav = async () => {\r\n      if (favList.includes(id)) {\r\n        const index = favList.indexOf(id);\r\n        favList.splice(index, 1);\r\n      } else {\r\n        favList.push(id);\r\n      }\r\n      const favObject = Object.assign({}, favList);\r\n      await setDoc(doc(db, \"favList\", uid.value), favObject)\r\n        .then(() => {\r\n          isFav.value = !isFav.value;\r\n        })\r\n        .catch((err) => console.log(err.message));\r\n    };\r\n\r\n    onMounted(() => {\r\n      load();\r\n      getUser();\r\n      getFav();\r\n    });\r\n\r\n    return { isFav, toggleFav, data, uid };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import { render } from \"./SingleView.vue?vue&type=template&id=32eb788a\"\nimport script from \"./SingleView.vue?vue&type=script&lang=js\"\nexport * from \"./SingleView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\vue練習\\\\customized-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getSingle","id","db","firebaseProject","docRef","doc","data","ref","load","getDoc","then","value","class","_createElementVNode","_createVNode","_component_Navbar","_hoisted_1","_hoisted_2","$setup","_createElementBlock","onClick","type","name","components","Navbar","setup","route","useRoute","params","auth","getAuth","uid","getUser","currentUser","isFav","favList","getFav","async","arr","Object","values","includes","toggleFav","index","indexOf","splice","push","favObject","assign","setDoc","catch","err","console","log","message","onMounted","__exports__","render"],"sourceRoot":""}